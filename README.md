# AdFunced-bilibili-capture / 哔哩哔哩高级截图工具

~~简称 ABC，对，这就是明目张胆地玩梗（x~~

~~鉴于 B 站并没有什么海外业务，这个 README 就不用英文写了。~~

## 安装

[点击此处](https://github.com/Dwscdv3/AdFunced-bilibili-capture/blob/master/AdFunced-bilibili-capture.user.js)。

您的浏览器需要安装有 Greasemonkey 或与其兼容的用户脚本管理器扩展（如 Tampermonkey），否则将看到源代码而不是安装界面。

## 使用指南

目前只支持快捷键操作，没有支持 GUI 的打算。~~当然，如果有人愿意提供优质 PR 的话 Dw 很乐意接受（~~

| 快捷键   | 功能                                                                                        |
|:--------:|---------------------------------------------------------------------------------------------|
| A        | 上一帧                                                                                      |
| D        | 下一帧                                                                                      |
| C        | 复制到剪贴板                                                                                |
| S        | 复制到剪贴板并以 PNG 格式保存到下载目录                                                     |
| 主数字键 | 复制到剪贴板并以 JPEG 格式保存到下载目录（左侧 1 为最低质量，右侧 0 为最高质量，推荐 4 ~ 6）|

截图不会将弹幕截进去，无论弹幕开关是否打开。（弹幕截图依赖于 Canvas 渲染模式，但 pakku.js 等扩展的一些功能依赖于 CSS 渲染模式，切换到 Canvas 模式会影响到这类扩展的正常工作。因此放弃了弹幕截图支持。）

图片的分辨率始终是视频的原始分辨率，不受播放器视窗大小的影响。

剪贴板中始终是无损的位图，不受 JPEG 质量参数的影响。

文件名格式为 `BV号-分钟-秒钟`，例如 `BV1rE411W7m6-21-09.png`。

## 附加功能

### 弹幕开关

此脚本还重写了弹幕开关按钮的功能，使其在关闭弹幕时仍然照常绘制弹幕，以便在重新打开弹幕时能够立刻看到之前几秒的弹幕，而不是等着新弹幕从最右面慢悠悠滚出来。

~~尽管此脚本的截图功能并不能将弹幕截进去。~~

修改后的开关显示为粉色以与原版区分。

## 兼容性

剪贴板目前仅支持 Chrome 76+（包括新版 Edge），其他功能应该支持所有现代浏览器。
